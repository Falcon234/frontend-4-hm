<!DOCTYPE html>
<input type="text" name="query" autocomplete="off" placeholder="Search images..." />
</form>


<ul class="gallery" id="gallery"></ul>
<button class="load-more" id="loadMore">Load more</button>


<script>
const API_KEY = '54212080-5be9a6906c6b76d8e51d64a2c';
const BASE_URL = 'https://pixabay.com/api/';


const form = document.getElementById('search-form');
const gallery = document.getElementById('gallery');
const loadMoreBtn = document.getElementById('loadMore');


let query = '';
let page = 1;


async function fetchImages() {
try {
const url = `${BASE_URL}?image_type=photo&orientation=horizontal&q=${encodeURIComponent(query)}&page=${page}&per_page=12&key=${API_KEY}`;
const response = await fetch(url);


if (!response.ok) {
throw new Error('HTTP error');
}


const data = await response.json();
return data.hits;
} catch (error) {
console.error('Fetch error:', error);
return [];
}
}


function createImageCard(image) {
return `
<li>
<div class="photo-card">
<img src="${image.webformatURL}" alt="${image.tags}" data-large="${image.largeImageURL}" />
<div class="stats">
<p class="stats-item"><i class="material-icons">thumb_up</i>${image.likes}</p>
<p class="stats-item"><i class="material-icons">visibility</i>${image.views}</p>
<p class="stats-item"><i class="material-icons">comment</i>${image.comments}</p>
<p class="stats-item"><i class="material-icons">cloud_download</i>${image.downloads}</p>
</div>
</div>
</li>`;
}


async function renderImages() {
try {
const images = await fetchImages();
const markup = images.map(createImageCard).join('');
gallery.insertAdjacentHTML('beforeend', markup);


if (images.length > 0) {
loadMoreBtn.style.display = 'block';
}
} catch (error) {
console.error('Render error:', error);
}
}


form.addEventListener('submit', async (e) => {
e.preventDefault();
query = e.target.elements.query.value.trim();
if (!query) return;


page = 1;
gallery.innerHTML = '';
loadMoreBtn.style.display = 'none';


await renderImages();
});


loadMoreBtn.addEventListener('click', async () => {
page += 1;
await renderImages();


const lastCard = gallery.lastElementChild;
if (lastCard) {
lastCard.scrollIntoView({ behavior: 'smooth', block: 'end' });
}
});
</script>


</body>
</html>
